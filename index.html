<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Man Sango at 6 - Live Concert at Echo Lounge Kisii Town</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        :root {
            --primary: #1a4b8c;
            --primary-light: #2a6fd6;
            --primary-dark: #0d2b5a;
            --accent: #ff6b35;
            --black: #0a0a0a;
            --dark: #1e1e1e;
            --gray: #3a3a3a;
            --light-gray: #e0e0e0;
            --white: #ffffff;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--white);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            display: flex;
            min-height: 100vh;
        }

        /* Side Navigation */
        .side-nav {
            width: 250px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 30px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .logo {
            text-align: center;
            padding: 0 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin-bottom: 15px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--white);
        }

        .logo p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 0 15px;
        }

        .nav-links a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-links a i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--accent);
            transform: translateX(5px);
        }

        .nav-links a.active {
            background: rgba(255, 255, 255, 0.15);
            color: var(--accent);
            border-left: 4px solid var(--accent);
        }

        .social-sidebar {
            padding: 30px 20px 0;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .social-sidebar h3 {
            font-size: 1rem;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .social-links-side {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .social-link-side {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .social-link-side:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            transition: all 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Page Sections */
        .page {
            display: none;
            padding: 40px 0;
            min-height: 100vh;
        }

        .page.active {
            display: block;
        }

        /* Enhanced Mobile Navigation - Fixed at Top */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            z-index: 2000;
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .mobile-nav-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 5px;
            overflow-x: auto;
            padding: 5px 0;
        }

        .mobile-nav-link {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 12px 20px;
            text-align: center;
            color: var(--white);
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            min-width: fit-content;
        }

        .mobile-nav-link i {
            font-size: 1rem;
        }

        .mobile-nav-link:hover {
            background: var(--accent);
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .mobile-nav-link.active {
            background: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1100;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 100vh;
            min-height: 700px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(10, 10, 10, 0.7), rgba(26, 75, 140, 0.8)), url('https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.25%20PM.jpeg');
            background-size: cover;
            background-position: center;
            text-align: center;
            padding: 20px;
            color: var(--white);
        }

        .hero-content {
            max-width: 800px;
            z-index: 2;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--white);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .hero .date {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent);
        }

        .hero .venue {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: var(--white);
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 2rem 0;
        }

        .countdown-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--accent);
            border-radius: 10px;
            padding: 15px 10px;
            min-width: 80px;
            backdrop-filter: blur(10px);
        }

        .countdown-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
        }

        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--white);
        }

        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--accent), #ff8c5a);
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
        }

        .btn-secondary:hover {
            background: rgba(255, 107, 53, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            box-shadow: 0 4px 15px rgba(26, 75, 140, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 6px 20px rgba(26, 75, 140, 0.5);
        }

        /* Sections */
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--primary);
            position: relative;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            margin: 10px auto;
            border-radius: 2px;
        }

        /* About Section */
        .about {
            background-color: var(--white);
        }

        .artist-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            font-size: 1.1rem;
        }

        .artist-image {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            object-fit: cover;
            margin: 30px auto;
            border: 5px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        /* Artists Grid */
        .artists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .artist-card {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.5s ease;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
        }

        .artist-card.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .artist-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .artist-card-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .artist-card:hover .artist-card-image {
            transform: scale(1.1);
        }

        .artist-card-name {
            padding: 15px 10px;
            font-weight: 600;
            color: var(--primary);
            transition: color 0.3s ease;
        }

        .artist-card:hover .artist-card-name {
            color: var(--accent);
        }

        /* Tickets Section */
        .tickets {
            background-color: var(--light-gray);
        }

        .ticket-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .ticket-card {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid var(--light-gray);
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .ticket-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--accent));
        }

        .ticket-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .ticket-card.vip {
            border-color: var(--primary);
        }

        .ticket-card.vvip {
            border: 2px solid var(--primary);
            transform: scale(1.05);
        }

        .ticket-type {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .ticket-price {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .ticket-features {
            list-style: none;
            margin-bottom: 25px;
            text-align: left;
        }

        .ticket-features li {
            padding: 8px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .ticket-features li:last-child {
            border-bottom: none;
        }

        .ticket-features li i {
            color: var(--primary);
            margin-right: 10px;
        }

        /* Merchandise Section */
        .merchandise {
            background-color: var(--white);
        }

        .merch-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .merch-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid var(--light-gray);
        }

        .merch-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .merch-image {
            height: 250px;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .merch-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .merch-card:hover .merch-image img {
            transform: scale(1.1);
        }

        .merch-details {
            padding: 20px;
        }

        .merch-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .merch-price {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .merch-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .merch-features li {
            padding: 5px 0;
            color: var(--gray);
        }

        .merch-features li i {
            color: var(--primary);
            margin-right: 10px;
        }

        /* Color Selection */
        .color-options {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.selected {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        /* Gallery Section */
        .gallery {
            background-color: var(--light-gray);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .gallery-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        /* Booking Form */
        .booking-form {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-gray);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--primary);
        }

        .form-control {
            width: 100%;
            padding: 15px;
            background: var(--white);
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            color: var(--dark);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 75, 140, 0.2);
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .total-price {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 25px 0;
            color: var(--primary);
        }

        /* Payment Options */
        .payment-options {
            margin-top: 30px;
        }

        .payment-tab {
            display: none;
        }

        .payment-tab.active {
            display: block;
        }

        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: var(--light-gray);
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: var(--primary);
            color: var(--white);
        }

        .payment-instructions {
            background: var(--light-gray);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .payment-instructions ol {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .payment-instructions li {
            margin-bottom: 10px;
        }

        .till-number {
            display: inline-block;
            background: var(--white);
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .status-message {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: 600;
        }

        .status-processing {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid var(--warning);
            color: var(--warning);
        }

        .status-success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--error);
            color: var(--error);
        }

        /* Ticket Retrieval */
        .ticket-retrieval {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-gray);
        }

        /* Donation Section */
        .donation {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
        }

        .donation .section-title {
            color: var(--white);
        }

        .donation .section-title:after {
            background: linear-gradient(to right, var(--accent), #ff8c5a);
        }

        .donation-form {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .donation-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .donation-option {
            flex: 1;
            min-width: 100px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .donation-option:hover, .donation-option.active {
            background: var(--accent);
            border-color: var(--accent);
        }

        /* Contact Section */
        .contact {
            background-color: var(--light-gray);
        }

        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .contact-card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .contact-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .contact-card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            color: var(--white);
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 40px 0;
            text-align: center;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .credits {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--gray);
            font-size: 0.9rem;
            color: var(--light-gray);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Mobile Quick Actions */
        .mobile-quick-actions {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--white);
            border-radius: 50px;
            padding: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            gap: 10px;
        }

        .mobile-quick-actions .btn {
            padding: 10px 20px;
            font-size: 0.8rem;
        }

        /* WhatsApp Banner */
        .whatsapp-banner {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            max-width: 350px;
            display: none;
            animation: slideInUp 0.5s ease-out;
        }

        .whatsapp-banner.active {
            display: block;
        }

        .whatsapp-banner-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .whatsapp-banner-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .whatsapp-banner-icon {
            font-size: 2rem;
        }

        .whatsapp-banner-title {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .whatsapp-banner-text {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .whatsapp-banner-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .whatsapp-banner-btn {
            padding: 8px 15px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .whatsapp-banner-btn-primary {
            background: white;
            color: #25D366;
        }

        .whatsapp-banner-btn-primary:hover {
            background: #f0f0f0;
        }

        .whatsapp-banner-btn-secondary {
            background: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .whatsapp-banner-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* WhatsApp Verification Section */
        .whatsapp-verification {
            text-align: center;
            padding: 20px;
            background: var(--light-gray);
            border-radius: 10px;
            margin-top: 20px;
        }

        .whatsapp-verification h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .whatsapp-verification p {
            margin-bottom: 15px;
        }

        .whatsapp-verification-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: #25D366;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .whatsapp-verification-btn:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }

        /* Donation Thank You Banner */
        .donation-thank-you {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            max-width: 500px;
            width: 90%;
            display: none;
        }

        .donation-thank-you.active {
            display: block;
        }

        .thank-you-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--white);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .thank-you-close:hover {
            background: var(--accent);
            transform: scale(1.1);
        }

        .thank-you-content {
            text-align: center;
            padding: 10px;
        }

        .thank-you-content h2 {
            margin-bottom: 15px;
            color: var(--accent);
            font-size: 1.8rem;
        }

        .thank-you-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .thank-you-signature {
            margin-top: 20px;
            font-style: italic;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            padding-top: 15px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .side-nav {
                width: 220px;
            }
            
            .main-content {
                margin-left: 220px;
            }
        }

        @media (max-width: 768px) {
            .side-nav {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .side-nav.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding-top: 80px;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .mobile-nav {
                display: block;
            }
            
            .mobile-quick-actions {
                display: flex;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .countdown-item {
                min-width: 70px;
                padding: 10px 5px;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
            
            .ticket-card.vvip {
                transform: none;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .section-title {
                font-size: 1.7rem;
            }
            
            .ticket-options, .merch-grid, .contact-info, .gallery-grid, .artists-grid {
                grid-template-columns: 1fr;
            }
            
            .artist-image {
                width: 250px;
                height: 250px;
            }
            
            .whatsapp-banner {
                bottom: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.7rem;
            }
            
            .hero .date {
                font-size: 1.2rem;
            }
            
            .hero .venue {
                font-size: 1rem;
            }
            
            .countdown {
                gap: 10px;
            }
            
            .countdown-item {
                min-width: 60px;
                padding: 8px 5px;
            }
            
            .countdown-number {
                font-size: 1.3rem;
            }
            
            .countdown-label {
                font-size: 0.7rem;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .mobile-quick-actions {
                flex-direction: column;
                width: 90%;
                border-radius: 15px;
            }
            
            .artist-image {
                width: 200px;
                height: 200px;
            }
            
            .artists-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .mobile-nav-links {
                gap: 3px;
            }

            .mobile-nav-link {
                padding: 10px 15px;
                font-size: 0.75rem;
            }

            .mobile-nav-link i {
                font-size: 0.9rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }

        .delay-1 { animation-delay: 0.2s; opacity: 0; }
        .delay-2 { animation-delay: 0.4s; opacity: 0; }
        .delay-3 { animation-delay: 0.6s; opacity: 0; }
        .delay-4 { animation-delay: 0.8s; opacity: 0; }
    </style>
</head>
<body>
    <!-- Mobile Navigation - Always Visible -->
    <nav class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-links">
            <a href="#home" class="mobile-nav-link active" data-page="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#tickets" class="mobile-nav-link" data-page="tickets">
                <i class="fas fa-ticket-alt"></i>
                <span>Tickets</span>
            </a>
            <a href="#merchandise" class="mobile-nav-link" data-page="merchandise">
                <i class="fas fa-tshirt"></i>
                <span>SHOP</span>
            </a>
            <a href="#donation" class="mobile-nav-link" data-page="donation">
                <i class="fas fa-heart"></i>
                <span>Donate</span>
            </a>
            <a href="#about" class="mobile-nav-link" data-page="about">
                <i class="fas fa-info-circle"></i>
                <span>Artists</span>
            </a>
            <a href="#gallery" class="mobile-nav-link" data-page="gallery">
                <i class="fas fa-images"></i>
                <span>Gallery</span>
            </a>
        </div>
    </nav>

    <!-- Donation Thank You Banner -->
    <div class="donation-thank-you" id="donationThankYou">
        <button class="thank-you-close" id="thankYouClose">
            <i class="fas fa-times"></i>
        </button>
        <div class="thank-you-content">
            <h2>You've Touched My Heart! ‚ù§Ô∏è</h2>
            <p><strong>This is Man Sango</strong> - I'm writing to you personally because your generous donation has truly moved me.</p>
            <p>Your support does more than help with expenses - it validates the countless hours I spend writing, practicing, and perfecting my craft. It tells me that my music matters.</p>
            <p>Because of believers like you, I can continue creating and sharing my art with the world. Thank you for investing in my musical journey.</p>
            <div class="thank-you-signature">
                <p>With deepest gratitude,<br>
                <strong>Man Sango</strong><br>
                üéµ Your belief fuels my music üéµ</p>
            </div>
        </div>
    </div>

    <!-- WhatsApp Banner -->
    <div class="whatsapp-banner" id="whatsappBanner">
        <div class="whatsapp-banner-content">
            <div class="whatsapp-banner-header">
                <i class="fab fa-whatsapp whatsapp-banner-icon"></i>
                <h3 class="whatsapp-banner-title">Need Help?</h3>
            </div>
            <p class="whatsapp-banner-text"> Hi am celebrating 6 years in music indurstry,Do you want to order tickets, buy merchandise online for my 6th year anniversary? Click here to check on WhatsApp</p>
            <div class="whatsapp-banner-actions">
                <button class="whatsapp-banner-btn whatsapp-banner-btn-secondary" id="closeBanner">Not Now</button>
                <a href="https://wa.me/254748840501?text=Hello!%20I%20want%20to%20order%20tickets%20or%20buy%20merchandise%20for%20Man%20Sango%20concert" 
                   target="_blank" class="whatsapp-banner-btn whatsapp-banner-btn-primary">WhatsApp me </a>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Side Navigation -->
    <nav class="side-nav">
        <div class="logo">
            <img src="https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/sign/Mansango%20event%20tickets/IMG-20251110-WA0041.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8zMjNkMDI2Zi0xMzkzLTRmMDQtYjk0Zi0yYzI3NGZiYTRmYzMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJNYW5zYW5nbyBldmVudCB0aWNrZXRzL0lNRy0yMDI1MTExMC1XQTAwNDEuanBnIiwiaWF0IjoxNzYzMjI0MDgxLCJleHAiOjE3OTQ3NjAwODF9.8o2pCJDUIPZF74CjLr3OalEGVn0u7t6SOGlxmatxMQ8">
            <h1>MAN SANGO</h1>
            <p>Live Concert Experience</p>
        </div>
        
        <div class="nav-links">
            <a href="#home" class="nav-link active" data-page="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#tickets" class="nav-link" data-page="tickets">
                <i class="fas fa-ticket-alt"></i>
                <span>Tickets</span>
            </a>
            <a href="#merchandise" class="nav-link" data-page="merchandise">
                <i class="fas fa-tshirt"></i>
                <span>SHOP</span>
            </a>
            <a href="#donation" class="nav-link" data-page="donation">
                <i class="fas fa-heart"></i>
                <span>Donate</span>
            </a>
            <a href="#about" class="nav-link" data-page="about">
                <i class="fas fa-info-circle"></i>
                <span>Artists</span>
            </a>
            <a href="#gallery" class="nav-link" data-page="gallery">
                <i class="fas fa-images"></i>
                <span>Gallery</span>
            </a>
        </div>
        
        <div class="social-sidebar">
            <h3>Follow Us</h3>
            <div class="social-links-side">
                <a href="https://www.facebook.com/ManSangoOfficial" class="social-link-side" target="_blank">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://x.com/MRikindi" class="social-link-side" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.instagram.com/man_sango_official/" class="social-link-side" target="_blank">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Home Page -->
        <section id="home" class="page active">
            <div class="hero">
                <div class="container">
                    <div class="hero-content fade-in">
                        <h1>Man Sango at 6 Live Concert at Echo Lounge Kisii Town</h1>
                        <p class="date">Friday, 12 December 2025 ‚Äî 4:00 PM till 6:00 am</p>
                        <p class="venue">Echo Lounge, MKO Plaza, Daraja Mbili, Kisii</p>
                        
                        <div class="countdown">
                            <div class="countdown-item">
                                <div class="countdown-number" id="days">00</div>
                                <div class="countdown-label">Days</div>
                            </div>
                            <div class="countdown-item">
                                <div class="countdown-number" id="hours">00</div>
                                <div class="countdown-label">Hours</div>
                            </div>
                            <div class="countdown-item">
                                <div class="countdown-number" id="minutes">00</div>
                                <div class="countdown-label">Minutes</div>
                            </div>
                            <div class="countdown-item">
                                <div class="countdown-number" id="seconds">00</div>
                                <div class="countdown-label">Seconds</div>
                            </div>
                        </div>
                        
                        <a href="#tickets" class="btn nav-link" data-page="tickets">Book Tickets Now</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tickets Page -->
        <section id="tickets" class="page">
            <div class="container">
                <h2 class="section-title fade-in">Ticket Options</h2>
                
                <div class="ticket-options">
                    <div class="ticket-card fade-in">
                        <h3 class="ticket-type">Regular</h3>
                        <div class="ticket-price">KSH 500</div>
                        <ul class="ticket-features">
                            <li><i class="fas fa-check"></i> General Admission</li>
                            <li><i class="fas fa-check"></i> Standing Area Access</li>
                            <li><i class="fas fa-check"></i> Basic Bar Service</li>
                        </ul>
                        <button class="btn btn-primary select-ticket" data-type="Regular" data-price="500">Select</button>
                    </div>
                    
                    <div class="ticket-card vip fade-in delay-1">
                        <h3 class="ticket-type">VIP</h3>
                        <div class="ticket-price">KSH 1000</div>
                        <ul class="ticket-features">
                            <li><i class="fas fa-check"></i> Priority Entry</li>
                            <li><i class="fas fa-check"></i> Reserved Seating</li>
                            <li><i class="fas fa-check"></i> Premium Bar Service</li>
                            <li><i class="fas fa-check"></i> VIP Lounge Access</li>
                        </ul>
                        <button class="btn btn-primary select-ticket" data-type="VIP" data-price="1000">Select</button>
                    </div>
                    
                    <div class="ticket-card vvip fade-in delay-2">
                        <h3 class="ticket-type">VVIP</h3>
                        <div class="ticket-price">KSH 2000</div>
                        <ul class="ticket-features">
                            <li><i class="fas fa-check"></i> Fast Track Entry</li>
                            <li><i class="fas fa-check"></i> Premium Reserved Seating</li>
                            <li><i class="fas fa-check"></i> Complimentary Drink</li>
                            <li><i class="fas fa-check"></i> Exclusive VVIP Area</li>
                            <li><i class="fas fa-check"></i> Meet & Greet Opportunity</li>
                        </ul>
                        <button class="btn btn-primary select-ticket" data-type="VVIP" data-price="2000">Select</button>
                    </div>
                </div>
                
                <!-- Booking Form -->
                <div class="booking-form fade-in delay-3" id="bookingForm" style="display: none;">
                    <h3 class="section-title">Book Your Tickets</h3>
                    
                    <form id="ticketForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="phone">M-Pesa Phone Number</label>
                                <input type="tel" id="phone" class="form-control" placeholder="2547XXXXXXXX or 0712345678" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" class="form-control" placeholder="Enter your email address" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ticketType">Ticket Type</label>
                                <input type="text" id="ticketType" class="form-control" readonly>
                            </div>
                            <div class="form-group">
                                <label for="quantity">Quantity</label>
                                <select id="quantity" class="form-control">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="total-price">
                            Total: KSH <span id="totalAmount">0</span>
                        </div>
                        
                        <button type="button" class="btn btn-primary" id="proceedToPayment">Proceed to Payment</button>
                    </form>
                </div>
                
                <!-- Payment Options -->
                <div class="payment-options fade-in delay-4" id="paymentOptions" style="display: none;">
                    <h3 class="section-title">Payment Options</h3>
                    
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="paystack">Pay with M-Pesa</button>
                        <button class="tab-button" data-tab="manual">Manual Payment</button>
                    </div>
                    
                    <div class="payment-tab active" id="paystackTab">
                        <div class="payment-instructions">
                            <h4>M-Pesa Payment Instructions:</h4>
                            <ol>
                                <li>Click "Pay Now with M-Pesa" below</li>
                                <li>A Paystack popup will appear</li>
                                <li>Select "M-Pesa" as your payment method</li>
                                <li>Enter your M-Pesa PIN when prompted</li>
                                <li>Wait for payment confirmation</li>
                            </ol>
                            <p>You will receive an M-Pesa prompt on your phone to complete the payment.</p>
                        </div>
                        
                        <button class="btn btn-primary" id="paystackPayment">Pay Now with M-Pesa</button>
                        
                        <div id="paystackStatus" style="display: none;"></div>
                    </div>
                    
                    <div class="payment-tab" id="manualTab">
                        <div class="payment-instructions">
                            <h4>Manual M-Pesa Payment Instructions:</h4>
                            <ol>
                                <li>Go to your M-Pesa menu</li>
                                <li>Select "Lipa Na M-Pesa"</li>
                                <li>Select "Buy Goods and Services"</li>
                                <li>Enter Till Number: <span class="till-number">3626261</span></li>
                                <li>Enter Amount: <strong>KSH <span id="manualAmount">0</span></strong></li>
                                <li>Enter your M-Pesa PIN</li>
                                <li>Enter Account Number: <strong id="manualAccount">MS-ORDER-REF</strong></li>
                                <li>Click "Confirm Payment" below after completing the transaction</li>
                            </ol>
                        </div>
                        
                        <button class="btn btn-primary" id="confirmManualPayment">Confirm Manual Payment</button>
                        
                        <div id="manualStatus" style="display: none;"></div>
                    </div>
                </div>
                
                <!-- Ticket Retrieval -->
                <div class="ticket-retrieval fade-in" id="ticketRetrieval">
                    <h3 class="section-title">Already Paid? Retrieve Your Ticket</h3>
                    
                    <div class="form-group">
                        <label for="retrieveBookingRef">Booking Reference</label>
                        <input type="text" id="retrieveBookingRef" class="form-control" placeholder="e.g., MS-20251212-ABCDE">
                    </div>
                    
                    <div class="form-group">
                        <label for="retrievePhone">Phone Number</label>
                        <input type="tel" id="retrievePhone" class="form-control" placeholder="2547XXXXXXXX or 0712345678">
                    </div>
                    
                    <button class="btn btn-primary" id="retrieveTicket">Retrieve Ticket</button>
                    
                    <div id="retrieveStatus" style="display: none;"></div>
                </div>
            </div>
        </section>

        <!-- Merchandise Page -->
        <section id="merchandise" class="page">
            <div class="container">
                <h2 class="section-title fade-in">Official Merchandise</h2>
                
                <div class="merch-grid">
                    <div class="merch-card fade-in">
                        <div class="merch-image">
                            <img src="https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/sign/Mansango%20event%20tickets/IMG-20251110-WA0036.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8zMjNkMDI2Zi0xMzkzLTRmMDQtYjk0Zi0yYzI3NGZiYTRmYzMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJNYW5zYW5nbyBldmVudCB0aWNrZXRzL0lNRy0yMDI1MTExMC1XQTAwMzYuanBnIiwiaWF0IjoxNzYzMjI0MzY1LCJleHAiOjE3OTQ3NjAzNjV9.SLoRJKq5NmlIUywXqtNtXhnfDzPEl-Xw0P7ZA5WdbVI">
                        </div>
                        <div class="merch-details">
                            <h3 class="merch-title">Man Sango AT 6 event T-Shirt</h3>
                            <div class="merch-price">KSH 1500</div>
                            <ul class="merch-features">
                                <li><i class="fas fa-check"></i> Premium quality cotton</li>
                                <li><i class="fas fa-check"></i> Official event design</li>
                                <li><i class="fas fa-check"></i> Available in multiple sizes</li>
                            </ul>
                            <button class="btn btn-primary buy-merch" data-item="T-Shirt" data-price="1500">Buy Now</button>
                        </div>
                    </div>
                    
                    <div class="merch-card fade-in delay-1">
                        <div class="merch-image">
                            <img src="https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/sign/Mansango%20event%20tickets/IMG-20251115-WA0007.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8zMjNkMDI2Zi0xMzkzLTRmMDQtYjk0Zi0yYzI3NGZiYTRmYzMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJNYW5zYW5nbyBldmVudCB0aWNrZXRzL0lNRy0yMDI1MTExNS1XQTAwMDcuanBnIiwiaWF0IjoxNzYzMjIzNTUxLCJleHAiOjE3OTQ3NTk1NTF9.uOl9NE-tGTtKnG8me0SeC56yAPnVspZNiUb2k6Gtnww">
                        </div>
                        <div class="merch-details">
                            <h3 class="merch-title">Man Sango AT 6 event Hoodie</h3>
                            <div class="merch-price">KSH 3000</div>
                            <ul class="merch-features">
                                <li><i class="fas fa-check"></i> Premium fleece material</li>
                                <li><i class="fas fa-check"></i> Official event design</li>
                                <li><i class="fas fa-check"></i> Available in multiple sizes</li>
                                <li><i class="fas fa-check"></i> Front pocket</li>
                            </ul>
                            <button class="btn btn-primary buy-merch" data-item="Hoodie" data-price="3000">Buy Now</button>
                        </div>
                    </div>
                </div>
                
                <!-- Merchandise Purchase Form -->
                <div class="booking-form fade-in delay-2" id="merchForm" style="display: none;">
                    <h3 class="section-title">Purchase Merchandise</h3>
                    
                    <form id="merchPurchaseForm">
                        <div class="form-group">
                            <label for="merchItem">Item</label>
                            <input type="text" id="merchItem" class="form-control" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Color</label>
                            <div class="color-options" id="colorOptions"></div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="merchSize">Size</label>
                                <select id="merchSize" class="form-control">
                                    <option value="S">Small</option>
                                    <option value="M">Medium</option>
                                    <option value="L">Large</option>
                                    <option value="XL">X-Large</option>
                                    <option value="XXL">XX-Large</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="merchQuantity">Quantity</label>
                                <select id="merchQuantity" class="form-control">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customerName">Full Name</label>
                                <input type="text" id="customerName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="customerPhone">M-Pesa Phone Number</label>
                                <input type="tel" id="customerPhone" class="form-control" placeholder="2547XXXXXXXX or 0712345678" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="customerEmail">Email Address</label>
                            <input type="email" id="customerEmail" class="form-control" placeholder="Enter your email address" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="deliveryOption">Delivery Option</label>
                            <select id="deliveryOption" class="form-control">
                                <option value="event">Collect at Event (Free)</option>
                                <option value="delivery">Home Delivery (KSH 200)</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="deliveryAddressGroup" style="display: none;">
                            <label for="deliveryAddress">Delivery Address</label>
                            <textarea id="deliveryAddress" class="form-control" rows="3" placeholder="Enter your full delivery address"></textarea>
                        </div>
                        
                        <div class="total-price">
                            Total: KSH <span id="merchTotalAmount">0</span>
                        </div>
                        
                        <button type="button" class="btn btn-primary" id="proceedToMerchPayment">Proceed to Payment</button>
                    </form>
                </div>
                
                <!-- Merchandise Payment Options -->
                <div class="payment-options fade-in delay-3" id="merchPaymentOptions" style="display: none;">
                    <h3 class="section-title">Payment Options</h3>
                    
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="merchPaystack">Pay with M-Pesa</button>
                        <button class="tab-button" data-tab="merchManual">Manual Payment</button>
                    </div>
                    
                    <div class="payment-tab active" id="merchPaystackTab">
                        <div class="payment-instructions">
                            <h4>M-Pesa Payment Instructions:</h4>
                            <ol>
                                <li>Click "Pay Now with M-Pesa" below</li>
                                <li>A Paystack popup will appear</li>
                                <li>Select "M-Pesa" as your payment method</li>
                                <li>Enter your M-Pesa PIN when prompted</li>
                                <li>Wait for payment confirmation</li>
                            </ol>
                            <p>You will receive an M-Pesa prompt on your phone to complete the payment.</p>
                        </div>
                        
                        <button class="btn btn-primary" id="merchPaystackPayment">Pay Now with M-Pesa</button>
                        
                        <div id="merchPaystackStatus" style="display: none;"></div>
                    </div>
                    
                    <div class="payment-tab" id="merchManualTab">
                        <div class="payment-instructions">
                            <h4>Manual M-Pesa Payment Instructions:</h4>
                            <ol>
                                <li>Go to your M-Pesa menu</li>
                                <li>Select "Lipa Na M-Pesa"</li>
                                <li>Select "Buy Goods and Services"</li>
                                <li>Enter Till Number: <span class="till-number">3626261</span></li>
                                <li>Enter Amount: <strong>KSH <span id="merchManualAmount">0</span></strong></li>
                                <li>Enter your M-Pesa PIN</li>
                                <li>Enter Account Number: <strong id="merchManualAccount">MS-MERCH-REF</strong></li>
                                <li>Click "Confirm Payment" below after completing the transaction</li>
                            </ol>
                        </div>
                        
                        <button class="btn btn-primary" id="confirmMerchManualPayment">Confirm Manual Payment</button>
                        
                        <div id="merchManualStatus" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Donation Page -->
        <section id="donation" class="page">
            <div class="container">
                <h2 class="section-title fade-in">Support Man Sango</h2>
                
                <div class="donation-form fade-in delay-1">
                    <p style="text-align: center; margin-bottom: 20px;">Your support helps create more amazing music and events. Every donation makes a difference!</p>
                    
                    <div class="form-group">
                        <label for="donorName">Your Name</label>
                        <input type="text" id="donorName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="donorPhone">M-Pesa Phone Number</label>
                        <input type="tel" id="donorPhone" class="form-control" placeholder="2547XXXXXXXX or 0712345678" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="donorEmail">Email Address</label>
                        <input type="email" id="donorEmail" class="form-control" placeholder="Enter your email address" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Donation Amount</label>
                        <div class="donation-options">
                            <div class="donation-option" data-amount="100">KSH 100</div>
                            <div class="donation-option" data-amount="500">KSH 500</div>
                            <div class="donation-option" data-amount="1000">KSH 1000</div>
                            <div class="donation-option" data-amount="2000">KSH 2000</div>
                            <div class="donation-option" data-amount="5000">KSH 5000</div>
                        </div>
                        <div class="form-group" style="margin-top: 15px;">
                            <input type="number" id="customAmount" class="form-control" placeholder="Or enter custom amount">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="donorMessage">Message (Optional)</label>
                        <textarea id="donorMessage" class="form-control" rows="3" placeholder="Share an encouraging message"></textarea>
                    </div>
                    
                    <div class="tab-buttons" style="margin-bottom: 20px;">
                        <button class="tab-button active" data-tab="donationPaystack">Pay with M-Pesa</button>
                        <button class="tab-button" data-tab="donationManual">Manual Payment</button>
                    </div>
                    
                    <div class="payment-tab active" id="donationPaystackTab">
                        <button class="btn" id="donateNow">Donate Now</button>
                    </div>
                    
                    <div class="payment-tab" id="donationManualTab">
                        <div class="payment-instructions">
                            <h4>Manual M-Pesa Payment Instructions:</h4>
                            <ol>
                                <li>Go to your M-Pesa menu</li>
                                <li>Select "Lipa Na M-Pesa"</li>
                                <li>Select "Buy Goods and Services"</li>
                                <li>Enter Till Number: <span class="till-number">3626261</span></li>
                                <li>Enter Amount: <strong>KSH <span id="donationManualAmount">0</span></strong></li>
                                <li>Enter your M-Pesa PIN</li>
                                <li>Enter Account Number: <strong id="donationManualAccount">MS-DONATION-REF</strong></li>
                                <li>Click "Confirm Donation" below after completing the transaction</li>
                            </ol>
                        </div>
                        
                        <button class="btn" id="confirmDonationManual">Confirm Manual Donation</button>
                    </div>
                    
                    <div id="donationStatus" style="display: none; margin-top: 20px;"></div>
                </div>
            </div>
        </section>

        <!-- Artists Page -->
        <section id="about" class="page">
            <div class="container">
                <h2 class="section-title fade-in">About The Event and perfoming artists, </h2>
                <div class="about-content fade-in delay-1">
                    <img src="https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/sign/Mansango%20event%20tickets/IMG-20251110-WA0041.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8zMjNkMDI2Zi0xMzkzLTRmMDQtYjk0Zi0yYzI3NGZiYTRmYzMiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJNYW5zYW5nbyBldmVudCB0aWNrZXRzL0lNRy0yMDI1MTExMC1XQTAwNDEuanBnIiwiaWF0IjoxNzYzMjIzODE2LCJleHAiOjE3OTQ3NTk4MTZ9.ZZP95rU1FssHAHLlRFH7NaQ0o_T-lR8ZeAGRmHT1Ju4" alt="Man Sango" class="artist-image">
                    <p>Get ready for an unforgettable night of live music with Man Sango at Echo Lounge Kisii! This highly anticipated concert will feature electrifying performances of his biggest hits along with special surprises.</p>
                    <p>Doors open at 4:00 PM till 6:00 morning, with the show starting promptly. Come early to secure the best spots and enjoy the pre-show atmosphere with drinks and music.</p>
                   
                    <h3 class="section-title" style="margin-top: 50px;">Performing Artists</h3>
                    <div class="artists-grid" id="artistsGrid"></div>
                </div>
            </div>
        </section>

        <!-- Gallery Page -->
        <section id="gallery" class="page">
            <div class="container">
                <h2 class="section-title fade-in">Event Gallery</h2>
                <p style="text-align: center; margin-bottom: 30px;">Take a look at some moments from previous events and promotional materials</p>
                
                <div class="gallery-grid">
                    <div class="gallery-item fade-in">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/IMG-20251108-WA0005.jpg" alt="Concert Performance">
                    </div>
                    <div class="gallery-item fade-in delay-1">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.25%20PM.jpeg" alt="Crowd at Event">
                    </div>
                    <div class="gallery-item fade-in delay-2">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.24%20PM.jpeg" alt="Stage Performance">
                    </div>
                    <div class="gallery-item fade-in delay-3">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.22%20PM.jpeg" alt="Artist Close-up">
                    </div>
                    <div class="gallery-item fade-in delay-1">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.21%20PM.jpeg" alt="Event Venue">
                    </div>
                    <div class="gallery-item fade-in delay-2">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.20%20PM.jpeg" alt="Artist Performance">
                    </div>
                    <div class="gallery-item fade-in delay-3">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.15%20PM.jpeg" alt="Concert Performance">
                    </div>
                    <div class="gallery-item fade-in delay-1">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.15%20PM%20(1).jpeg" alt="Crowd at Event">
                    </div>
                    <div class="gallery-item fade-in delay-2">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.14%20PM.jpeg" alt="Stage Performance">
                    </div>
                    <div class="gallery-item fade-in delay-3">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.11%20PM.jpeg" alt="Artist Close-up">
                    </div>
                    <div class="gallery-item fade-in delay-1">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.18.10%20PM.jpeg" alt="Event Venue">
                    </div>
                    <div class="gallery-item fade-in delay-2">
                        <img src="https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/WhatsApp%20Image%202025-11-10%20at%207.46.07%20PM.jpeg" alt="Artist Performance">
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <p>Man Sango at 6 Live Concert at Echo Lounge Kisii Town</p>
                    <div class="credits">
                        <p>Website developed by Felix Nyabuto (0716625790)</p>
                        <p>¬© 2025 Fresh Music Entertainment. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Success Modal -->
        <div class="modal" id="successModal">
            <div class="modal-content">
                <button class="modal-close" id="closeModal">&times;</button>
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4rem; color: var(--success); margin-bottom: 20px;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 style="color: var(--primary); margin-bottom: 15px;" id="modalTitle">Payment Successful!</h2>
                    <p id="modalMessage">Your payment has been successfully processed.</p>
                    <p>Your order reference: <strong id="orderRefDisplay">MS-ABCDE12345</strong></p>
                    <p>Your PDF ticket has been sent to your email and is downloading now.</p>
                    <button class="btn btn-primary" style="margin-top: 20px;" id="downloadReceipt">Download PDF Ticket</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Supabase Integration
        const SUPABASE_CONFIG = {
            url: 'https://vsxlzihjcmgkjqcpsrkc.supabase.co',
            key: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzeGx6aWhqY21na2pxY3BzcmtjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MjUzNTYsImV4cCI6MjA3ODEwMTM1Nn0.bMU5i2QBWzVB86aQAj4gjmfD1cFsFYJL877YoCqtxUk'
        };

        // Initialize Supabase
        const supabase = window.supabase.createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.key);

        // Test Supabase connection on page load
        async function testSupabaseConnection() {
            try {
                const { data, error } = await supabase
                    .from('ticket_orders')
                    .select('count')
                    .limit(1);
                
                if (error) {
                    console.error('Supabase connection test failed:', error);
                    return false;
                }
                
                console.log('Supabase connection test successful');
                return true;
            } catch (error) {
                console.error('Supabase connection test error:', error);
                return false;
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Initializing application...');
            
            // Test Supabase connection
            const connectionSuccess = await testSupabaseConnection();
            if (!connectionSuccess) {
                console.warn('Supabase connection failed. Some features may not work properly.');
            }
            
            // Initialize other components
            initializeNavigation();
            initializeEventHandlers();
            createArtistCards();
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Show WhatsApp banner after 5 seconds
            setTimeout(() => {
                document.getElementById('whatsappBanner').classList.add('active');
            }, 5000);
            
            console.log('Application initialized successfully');
        });

        // Enhanced Navigation System
        function initializeNavigation() {
            // Mobile Navigation
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = this.getAttribute('data-page');
                    navigateToPage(targetPage);
                });
            });

            // Desktop Navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetPage = this.getAttribute('data-page');
                    navigateToPage(targetPage);
                });
            });

            // Mobile Menu Toggle
            document.querySelector('.mobile-menu-btn').addEventListener('click', function() {
                document.querySelector('.side-nav').classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                const sideNav = document.querySelector('.side-nav');
                const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
                
                if (window.innerWidth <= 768 && 
                    sideNav.classList.contains('active') && 
                    !sideNav.contains(e.target) && 
                    !mobileMenuBtn.contains(e.target)) {
                    sideNav.classList.remove('active');
                }
            });
        }

        function navigateToPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show target page
            document.getElementById(pageId).classList.add('active');
            
            // Update active nav links
            document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(navLink => {
                navLink.classList.remove('active');
            });
            
            document.querySelectorAll(`[data-page="${pageId}"]`).forEach(navLink => {
                navLink.classList.add('active');
            });
            
            // Close mobile menu
            if (window.innerWidth <= 768) {
                document.querySelector('.side-nav').classList.remove('active');
            }
            
            // Initialize page-specific content
            if (pageId === 'about') {
                setTimeout(createArtistCards, 100);
            }
        }

        // Enhanced Event Handlers
        function initializeEventHandlers() {
            // Donation Thank You Banner
            const donationThankYou = document.getElementById('donationThankYou');
            const thankYouClose = document.getElementById('thankYouClose');
            thankYouClose.addEventListener('click', function() {
                donationThankYou.classList.remove('active');
            });

            // WhatsApp Banner
            document.getElementById('closeBanner').addEventListener('click', function() {
                document.getElementById('whatsappBanner').classList.remove('active');
                localStorage.setItem('whatsappBannerDismissed', 'true');
            });

            // Ticket Selection
            document.querySelectorAll('.select-ticket').forEach(button => {
                button.addEventListener('click', function() {
                    const ticketType = this.getAttribute('data-type');
                    const ticketPrice = this.getAttribute('data-price');
                    
                    document.getElementById('ticketType').value = ticketType;
                    document.getElementById('totalAmount').textContent = ticketPrice;
                    document.getElementById('manualAmount').textContent = ticketPrice;
                    
                    document.getElementById('bookingForm').style.display = 'block';
                    document.getElementById('paymentOptions').style.display = 'none';
                    document.getElementById('bookingForm').scrollIntoView({ behavior: 'smooth' });
                });
            });

            // Update ticket total
            document.getElementById('quantity').addEventListener('change', function() {
                const ticketPrice = parseInt(document.getElementById('ticketType').value === 'Regular' ? 500 : 
                                          document.getElementById('ticketType').value === 'VIP' ? 1000 : 2000);
                const quantity = parseInt(this.value);
                const total = ticketPrice * quantity;
                
                document.getElementById('totalAmount').textContent = total;
                document.getElementById('manualAmount').textContent = total;
            });

            // Proceed to payment
            document.getElementById('proceedToPayment').addEventListener('click', function() {
                if (validateTicketForm()) {
                    document.getElementById('paymentOptions').style.display = 'block';
                    document.getElementById('paymentOptions').scrollIntoView({ behavior: 'smooth' });
                    
                    // Generate order reference for manual payment
                    const orderRef = generateOrderReference('MS');
                    document.getElementById('manualAccount').textContent = orderRef;
                    window.currentOrderRef = orderRef;
                }
            });

            // Payment tab switching
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    const container = this.closest('.payment-options') || this.closest('.donation-form');
                    
                    // Update active tab button
                    container.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Show corresponding tab content
                    container.querySelectorAll('.payment-tab').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    container.querySelector(`#${tabId}Tab`).classList.add('active');
                });
            });

            // Paystack payment
            document.getElementById('paystackPayment').addEventListener('click', processPaystackPayment);
            
            // Manual payment confirmation
            document.getElementById('confirmManualPayment').addEventListener('click', confirmManualPayment);
            
            // Initialize other event handlers...
            initializeMerchandiseHandlers();
            initializeDonationHandlers();
            initializeModalHandlers();
        }

        // Form Validation
        function validateTicketForm() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const ticketType = document.getElementById('ticketType').value;
            
            if (!name || !phone || !email || !ticketType) {
                showError('Please fill in all required fields');
                return false;
            }
            
            const validatedPhone = validatePhoneNumber(phone);
            if (!validatedPhone) {
                showError('Please enter a valid Kenyan phone number (e.g., 0712345678, 254712345678)');
                return false;
            }
            
            document.getElementById('phone').value = validatedPhone;
            return true;
        }

        function validatePhoneNumber(phone) {
            const cleanPhone = phone.replace(/\D/g, '');
            
            if (cleanPhone.startsWith('254') && cleanPhone.length === 12) {
                return cleanPhone;
            }
            
            if (cleanPhone.startsWith('0') && cleanPhone.length === 10) {
                return '254' + cleanPhone.substring(1);
            }
            
            if (cleanPhone.startsWith('7') && cleanPhone.length === 9) {
                return '254' + cleanPhone;
            }
            
            return null;
        }

        // Enhanced Paystack Payment
        function processPaystackPayment() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const ticketType = document.getElementById('ticketType').value;
            const quantity = document.getElementById('quantity').value;
            const total = parseInt(document.getElementById('totalAmount').textContent);
            
            const orderRef = generateOrderReference('MS');
            window.currentOrderRef = orderRef;
            
            const orderData = {
                name: name,
                phone: phone,
                email: email,
                ticketType: ticketType,
                quantity: quantity,
                total: total,
                orderRef: orderRef,
                type: 'ticket'
            };
            
            const handler = PaystackPop.setup({
                key: 'pk_live_d6b855fdc0f696978818694e852e3fc5f4a1617b',
                email: email,
                amount: total * 100,
                currency: 'KES',
                ref: orderRef,
                metadata: {
                    custom_fields: [
                        {
                            display_name: "Customer Name",
                            variable_name: "customer_name",
                            value: name
                        },
                        {
                            display_name: "Order Type",
                            variable_name: "order_type",
                            value: 'ticket'
                        }
                    ]
                },
                callback: function(response) {
                    console.log('Paystack callback:', response);
                    handleSuccessfulPayment(response, orderData);
                },
                onClose: function() {
                    console.log('Payment window closed');
                    showManualPaymentOption(orderData);
                }
            });
            
            handler.openIframe();
        }

        // Manual Payment Handling
        async function confirmManualPayment() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const ticketType = document.getElementById('ticketType').value;
            const quantity = document.getElementById('quantity').value;
            const total = parseInt(document.getElementById('totalAmount').textContent);
            const orderRef = window.currentOrderRef;
            
            const orderData = {
                name: name,
                phone: phone,
                email: email,
                ticketType: ticketType,
                quantity: quantity,
                total: total,
                orderRef: orderRef,
                type: 'ticket'
            };
            
            try {
                // Save manual payment to Supabase
                const savedOrderRef = await saveTicketOrder(
                    name, phone, email, ticketType, quantity, total, 
                    'manual_mpesa_till', orderRef
                );
                
                showStatus('manualStatus', 'Manual payment recorded! Redirecting to WhatsApp for verification...', 'success');
                
                // Redirect to WhatsApp
                setTimeout(() => {
                    redirectToWhatsApp(orderData);
                }, 2000);
                
            } catch (error) {
                console.error('Error saving manual payment:', error);
                showStatus('manualStatus', 'Error recording payment: ' + error.message, 'error');
            }
        }

        // Enhanced Supabase Functions
        async function saveTicketOrder(name, phone, email, ticketType, quantity, total, paymentMethod, reference = null) {
            const orderRef = reference || generateOrderReference('MS');
            
            const { data, error } = await supabase
                .from('ticket_orders')
                .insert([
                    {
                        order_ref: orderRef,
                        customer_name: name,
                        customer_phone: phone,
                        customer_email: email,
                        ticket_type: ticketType,
                        quantity: parseInt(quantity),
                        total_amount: parseInt(total),
                        payment_method: paymentMethod,
                        paystack_reference: reference,
                        status: paymentMethod === 'manual_mpesa_till' ? 'pending_verification' : 'confirmed',
                        created_at: new Date().toISOString()
                    }
                ]);
            
            if (error) {
                console.error('Supabase error:', error);
                throw new Error('Failed to save order to database: ' + error.message);
            }
            
            console.log('Ticket order saved successfully:', orderRef);
            return orderRef;
        }

        async function saveMerchOrder(item, color, size, quantity, name, phone, deliveryOption, deliveryAddress, total, paymentMethod, reference = null) {
            const orderRef = reference || generateOrderReference('MS-MERCH');
            
            const { data, error } = await supabase
                .from('merch_orders')
                .insert([
                    {
                        order_ref: orderRef,
                        item: item,
                        color: color,
                        size: size,
                        quantity: parseInt(quantity),
                        customer_name: name,
                        customer_phone: phone,
                        delivery_option: deliveryOption,
                        delivery_address: deliveryAddress,
                        total_amount: parseInt(total),
                        payment_method: paymentMethod,
                        paystack_reference: reference,
                        status: paymentMethod === 'manual_mpesa_till' ? 'pending_verification' : 'confirmed',
                        created_at: new Date().toISOString()
                    }
                ]);
            
            if (error) {
                console.error('Supabase error:', error);
                throw new Error('Failed to save merch order to database: ' + error.message);
            }
            
            console.log('Merch order saved successfully:', orderRef);
            return orderRef;
        }

        async function saveDonation(name, phone, email, amount, message = '') {
            const { data, error } = await supabase
                .from('donations')
                .insert([
                    {
                        donor_name: name,
                        donor_phone: phone,
                        donor_email: email,
                        amount: parseInt(amount),
                        message: message,
                        created_at: new Date().toISOString()
                    }
                ]);
            
            if (error) {
                console.error('Supabase error:', error);
                throw new Error('Failed to save donation to database: ' + error.message);
            }
            
            console.log('Donation saved successfully');
            return data;
        }

        // Payment Success Handler - UPDATED FOR DONATIONS
        async function handleSuccessfulPayment(response, orderData) {
            try {
                let savedOrderRef;
                
                if (orderData.type === 'ticket') {
                    savedOrderRef = await saveTicketOrder(
                        orderData.name, orderData.phone, orderData.email, 
                        orderData.ticketType, orderData.quantity, orderData.total,
                        'paystack', response.reference
                    );
                    
                    // Show success modal for tickets
                    showSuccessModal(orderData, savedOrderRef);
                    
                    // Generate and download PDF for tickets
                    generateAndDownloadPDFTicket(orderData, savedOrderRef);
                    
                    // Send email for tickets
                    sendTicketEmail(orderData, savedOrderRef);
                    
                } else if (orderData.type === 'merch') {
                    savedOrderRef = await saveMerchOrder(
                        orderData.item, orderData.color, orderData.size,
                        orderData.quantity, orderData.name, orderData.phone,
                        orderData.delivery, orderData.address, orderData.total,
                        'paystack', response.reference
                    );
                    
                    // Show success modal for merch
                    showSuccessModal(orderData, savedOrderRef);
                    
                    // Generate and download PDF for merch
                    generateAndDownloadMerchReceipt(orderData, savedOrderRef);
                    
                    // Send email for merch
                    sendMerchEmail(orderData, savedOrderRef);
                    
                } else if (orderData.type === 'donation') {
                    await saveDonation(
                        orderData.name, orderData.phone, orderData.email,
                        orderData.amount, orderData.message
                    );

                    // Show donation thank you banner ONLY for donations (no PDF download)
                    setTimeout(() => {
                        document.getElementById('donationThankYou').classList.add('active');
                    }, 1000);
                    
                    // Send email for donation (no PDF)
                    sendDonationEmail(orderData);
                    
                    // Show success message in donation status
                    showStatus('donationStatus', 'Thank you for your generous donation! Your support means the world to Man Sango.', 'success');
                }
                
            } catch (error) {
                console.error('Error handling successful payment:', error);
                showError('Payment successful but there was an error processing your order. Please contact support.');
            }
        }

        // PDF Generation Functions - TICKETS ONLY
        function generateAndDownloadPDFTicket(order, orderRef) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add background color
            doc.setFillColor(26, 75, 140);
            doc.rect(0, 0, 210, 50, 'F');
            
            // Add header
            doc.setFontSize(20);
            doc.setTextColor(255, 255, 255);
            doc.text('MAN SANGO CONCERT TICKET', 105, 20, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text('Live at Echo Lounge Kisii', 105, 30, { align: 'center' });
            doc.text('December 12, 2025 - 4:00 PM', 105, 40, { align: 'center' });
            
            // Add ticket details
            doc.setFillColor(255, 255, 255);
            doc.rect(10, 60, 190, 120, 'F');
            
            doc.setFontSize(16);
            doc.setTextColor(26, 75, 140);
            doc.text('TICKET DETAILS', 20, 75);
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Order Reference: ${orderRef}`, 20, 90);
            doc.text(`Ticket Type: ${order.ticketType}`, 20, 100);
            doc.text(`Quantity: ${order.quantity}`, 20, 110);
            doc.text(`Total Amount: KSH ${order.total}`, 20, 120);
            
            // Add customer details
            doc.text('CUSTOMER DETAILS', 20, 140);
            doc.text(`Name: ${order.name}`, 20, 150);
            doc.text(`Phone: ${order.phone}`, 20, 160);
            doc.text(`Email: ${order.email}`, 20, 170);
            
            // Add event details
            doc.text('EVENT DETAILS', 120, 75);
            doc.text('Man Sango at 6 Live Concert', 120, 90);
            doc.text('Date: December 12, 2025', 120, 100);
            doc.text('Time: 4:00 PM', 120, 110);
            doc.text('Venue: Echo Lounge Kisii', 120, 120);
            doc.text('Location: MKO Plaza, Daraja Mbili', 120, 130);
            
            // Add QR code placeholder
            doc.setDrawColor(200, 200, 200);
            doc.rect(75, 180, 60, 60);
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text('QR CODE', 105, 195, { align: 'center' });
            doc.text('Present at venue', 105, 205, { align: 'center' });
            doc.text('for entry', 105, 215, { align: 'center' });
            
            // Add footer
            doc.setFontSize(8);
            doc.text('Contact: 0748840501 | Email: mansangoentertainment@gmail.com', 105, 280, { align: 'center' });
            doc.text('¬© 2025 Fresh Music Entertainment. All rights reserved.', 105, 285, { align: 'center' });
            
            // Download the PDF
            doc.save(`ManSango_Ticket_${orderRef}.pdf`);
        }

        function generateAndDownloadMerchReceipt(order, orderRef) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add background color
            doc.setFillColor(26, 75, 140);
            doc.rect(0, 0, 210, 50, 'F');
            
            // Add header
            doc.setFontSize(20);
            doc.setTextColor(255, 255, 255);
            doc.text('MAN SANGO MERCHANDISE RECEIPT', 105, 20, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text('Thank you for your purchase!', 105, 30, { align: 'center' });
            
            // Add receipt details
            doc.setFillColor(255, 255, 255);
            doc.rect(10, 60, 190, 120, 'F');
            
            doc.setFontSize(16);
            doc.setTextColor(26, 75, 140);
            doc.text('ORDER DETAILS', 20, 75);
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Order Reference: ${orderRef}`, 20, 90);
            doc.text(`Item: ${order.item}`, 20, 100);
            doc.text(`Color: ${order.color}`, 20, 110);
            doc.text(`Size: ${order.size}`, 20, 120);
            doc.text(`Quantity: ${order.quantity}`, 20, 130);
            doc.text(`Total Amount: KSH ${order.total}`, 20, 140);
            
            // Add customer details
            doc.text('CUSTOMER DETAILS', 120, 75);
            doc.text(`Name: ${order.name}`, 120, 90);
            doc.text(`Phone: ${order.phone}`, 120, 100);
            doc.text(`Email: ${order.email}`, 120, 110);
            doc.text(`Delivery: ${order.delivery === 'event' ? 'Collect at Event' : 'Home Delivery'}`, 120, 120);
            
            if (order.delivery === 'delivery') {
                doc.text(`Address: ${order.address}`, 120, 130);
            }
            
            // Add footer
            doc.setFontSize(8);
            doc.text('Contact: 0748840501 | Email: mansangoentertainment@gmail.com', 105, 280, { align: 'center' });
            doc.text('¬© 2025 Fresh Music Entertainment. All rights reserved.', 105, 285, { align: 'center' });
            
            // Download the PDF
            doc.save(`ManSango_Merch_${orderRef}.pdf`);
        }

        // Email Sending Function
        async function sendTicketEmail(orderData, orderRef) {
            try {
                emailjs.init("eUpIab2_n-wLXmMUj");
                
                const templateParams = {
                    to_name: orderData.name,
                    to_email: orderData.email,
                    order_reference: orderRef,
                    ticket_type: orderData.ticketType,
                    quantity: orderData.quantity,
                    total_amount: `KSH ${orderData.total}`,
                    event_name: 'Man Sango at 6 Live Concert',
                    event_date: 'December 12, 2025',
                    event_time: '4:00 PM',
                    event_venue: 'Echo Lounge, MKO Plaza, Daraja Mbili, Kisii'
                };

                const response = await emailjs.send('service_rqxvm4u', 'template_35nma87', templateParams);
                console.log('Ticket email sent successfully:', response);
                return true;
            } catch (error) {
                console.error('Failed to send ticket email:', error);
                return false;
            }
        }

        async function sendMerchEmail(orderData, orderRef) {
            try {
                emailjs.init("eUpIab2_n-wLXmMUj");
                
                const templateParams = {
                    to_name: orderData.name,
                    to_email: orderData.email,
                    order_reference: orderRef,
                    item: orderData.item,
                    color: orderData.color,
                    size: orderData.size,
                    quantity: orderData.quantity,
                    total_amount: `KSH ${orderData.total}`,
                    delivery_option: orderData.delivery === 'event' ? 'Collect at Event' : 'Home Delivery',
                    delivery_address: orderData.address || 'N/A'
                };

                const response = await emailjs.send('service_rqxvm4u', 'template_35nma87', templateParams);
                console.log('Merch email sent successfully:', response);
                return true;
            } catch (error) {
                console.error('Failed to send merch email:', error);
                return false;
            }
        }

        async function sendDonationEmail(orderData) {
            try {
                emailjs.init("eUpIab2_n-wLXmMUj");
                
                const templateParams = {
                    to_name: orderData.name,
                    to_email: orderData.email,
                    donation_amount: `KSH ${orderData.amount}`,
                    message: orderData.message || 'No message provided'
                };

                const response = await emailjs.send('service_rqxvm4u', 'template_35nma87', templateParams);
                console.log('Donation email sent successfully:', response);
                return true;
            } catch (error) {
                console.error('Failed to send donation email:', error);
                return false;
            }
        }

        // Utility Functions
        function generateOrderReference(prefix) {
            const timestamp = Date.now().toString().slice(-6);
            const random = Math.random().toString(36).substring(2, 5).toUpperCase();
            return `${prefix}-${timestamp}-${random}`;
        }

        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
        }

        function showError(message) {
            alert(message);
        }

        function showSuccessModal(orderData, orderRef) {
            document.getElementById('modalTitle').textContent = 'Payment Successful!';
            document.getElementById('modalMessage').textContent = `Your ${orderData.type} has been successfully processed.`;
            document.getElementById('orderRefDisplay').textContent = orderRef;
            document.getElementById('successModal').classList.add('active');
            
            // Store order data for receipt download
            window.currentOrder = { ...orderData, orderRef: orderRef };
        }

        function showManualPaymentOption(orderData) {
            const statusDiv = document.getElementById('paystackStatus');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = `
                <div class="payment-instructions">
                    <h4>Manual Payment Option</h4>
                    <p>If M-Pesa payment didn't work, you can make a manual payment:</p>
                    <ol>
                        <li>Go to M-Pesa > Lipa Na M-Pesa > Buy Goods and Services</li>
                        <li>Enter Till Number: <strong>3626261</strong></li>
                        <li>Amount: <strong>KSH ${orderData.total}</strong></li>
                        <li>Account: <strong>${orderData.orderRef}</strong></li>
                    </ol>
                    <button class="btn btn-secondary" onclick="confirmManualPayment()">
                        I've Made the Payment
                    </button>
                </div>
            `;
        }

        // WhatsApp Redirect Functions
        function redirectToWhatsApp(orderData) {
            const message = `Hello! I've completed a manual M-Pesa payment for the Man Sango concert. Here are my details:
            
Order Reference: ${orderData.orderRef}
Name: ${orderData.name}
Phone: ${orderData.phone}
Ticket Type: ${orderData.ticketType}
Quantity: ${orderData.quantity}
Total Amount: KSH ${orderData.total}

Please verify my payment and send my ticket.`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254748840501?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        function redirectToWhatsAppMerch(orderData) {
            const message = `Hello! I've completed a manual M-Pesa payment for Man Sango merchandise. Here are my details:
            
Order Reference: ${orderData.orderRef}
Name: ${orderData.name}
Phone: ${orderData.phone}
Item: ${orderData.item}
Color: ${orderData.color}
Size: ${orderData.size}
Quantity: ${orderData.quantity}
Total Amount: KSH ${orderData.total}
Delivery Option: ${orderData.delivery === 'event' ? 'Collect at Event' : 'Home Delivery'}
${orderData.delivery === 'delivery' ? `Delivery Address: ${orderData.address}` : ''}

Please verify my payment and process my order.`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254748840501?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        // Initialize other sections (merchandise, donation, etc.)
        function initializeMerchandiseHandlers() {
            // Merchandise purchase handlers
            document.querySelectorAll('.buy-merch').forEach(button => {
                button.addEventListener('click', function() {
                    const item = this.getAttribute('data-item');
                    const price = this.getAttribute('data-price');
                    
                    document.getElementById('merchItem').value = item;
                    document.getElementById('merchTotalAmount').textContent = price;
                    document.getElementById('merchManualAmount').textContent = price;
                    
                    // Set color options
                    const colorOptions = document.getElementById('colorOptions');
                    colorOptions.innerHTML = '';
                    
                    const colors = item === 'T-Shirt' ? 
                        [
                            { name: 'Black', value: '#000000' },
                            { name: 'White', value: '#FFFFFF' },
                            { name: 'Navy Blue', value: '#000080' },
                            { name: 'Red', value: '#FF0000' },
                            { name: 'Gray', value: '#808080' }
                        ] : [
                            { name: 'Black', value: '#000000' },
                            { name: 'Charcoal', value: '#36454F' },
                            { name: 'Navy Blue', value: '#000080' },
                            { name: 'Burgundy', value: '#800020' },
                            { name: 'Forest Green', value: '#228B22' }
                        ];
                    
                    colors.forEach(color => {
                        const colorOption = document.createElement('div');
                        colorOption.className = 'color-option';
                        colorOption.style.backgroundColor = color.value;
                        colorOption.setAttribute('data-color', color.name);
                        colorOption.setAttribute('title', color.name);
                        
                        colorOption.addEventListener('click', function() {
                            document.querySelectorAll('.color-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            this.classList.add('selected');
                        });
                        
                        colorOptions.appendChild(colorOption);
                    });
                    
                    if (colorOptions.firstChild) {
                        colorOptions.firstChild.classList.add('selected');
                    }
                    
                    document.getElementById('merchForm').style.display = 'block';
                    document.getElementById('merchPaymentOptions').style.display = 'none';
                    document.getElementById('merchForm').scrollIntoView({ behavior: 'smooth' });
                });
            });

            // Delivery address toggle
            document.getElementById('deliveryOption').addEventListener('change', function() {
                const deliveryAddressGroup = document.getElementById('deliveryAddressGroup');
                deliveryAddressGroup.style.display = this.value === 'delivery' ? 'block' : 'none';
                updateMerchTotal();
            });

            // Update merch total
            document.getElementById('merchQuantity').addEventListener('change', updateMerchTotal);
            
            function updateMerchTotal() {
                const basePrice = parseInt(document.getElementById('merchItem').value === 'T-Shirt' ? 1500 : 3000);
                const quantity = parseInt(document.getElementById('merchQuantity').value);
                const deliveryOption = document.getElementById('deliveryOption').value;
                const deliveryCost = deliveryOption === 'delivery' ? 200 : 0;
                
                const total = (basePrice * quantity) + deliveryCost;
                document.getElementById('merchTotalAmount').textContent = total;
                document.getElementById('merchManualAmount').textContent = total;
            }

            // Proceed to merch payment
            document.getElementById('proceedToMerchPayment').addEventListener('click', function() {
                if (validateMerchForm()) {
                    document.getElementById('merchPaymentOptions').style.display = 'block';
                    
                    // Generate order reference for manual payment
                    const orderRef = generateOrderReference('MS-MERCH');
                    document.getElementById('merchManualAccount').textContent = orderRef;
                    window.currentMerchOrderRef = orderRef;
                }
            });

            // Merch Paystack payment
            document.getElementById('merchPaystackPayment').addEventListener('click', processMerchPaystackPayment);
            
            // Merch manual payment
            document.getElementById('confirmMerchManualPayment').addEventListener('click', confirmMerchManualPayment);
        }

        function initializeDonationHandlers() {
            // Donation option selection
            document.querySelectorAll('.donation-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.donation-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    document.getElementById('customAmount').value = '';
                    updateDonationAmount();
                });
            });

            // Custom amount input
            document.getElementById('customAmount').addEventListener('input', function() {
                if (this.value) {
                    document.querySelectorAll('.donation-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                }
                updateDonationAmount();
            });

            // Donation payment
            document.getElementById('donateNow').addEventListener('click', processDonationPayment);
            document.getElementById('confirmDonationManual').addEventListener('click', confirmDonationManual);

            function updateDonationAmount() {
                let amount = 0;
                const selectedOption = document.querySelector('.donation-option.active');
                if (selectedOption) {
                    amount = parseInt(selectedOption.getAttribute('data-amount'));
                } else if (document.getElementById('customAmount').value) {
                    amount = parseInt(document.getElementById('customAmount').value);
                }
                
                document.getElementById('donationManualAmount').textContent = amount;
                
                // Generate order reference for manual donation
                const orderRef = generateOrderReference('MS-DONATION');
                document.getElementById('donationManualAccount').textContent = orderRef;
                window.currentDonationOrderRef = orderRef;
            }
        }

        function initializeModalHandlers() {
            // Modal close
            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('successModal').classList.remove('active');
            });

            // Download receipt
            document.getElementById('downloadReceipt').addEventListener('click', function() {
                if (window.currentOrder) {
                    if (window.currentOrder.type === 'ticket') {
                        generateAndDownloadPDFTicket(window.currentOrder, window.currentOrder.orderRef);
                    } else if (window.currentOrder.type === 'merch') {
                        generateAndDownloadMerchReceipt(window.currentOrder, window.currentOrder.orderRef);
                    }
                }
            });
        }

        // Form validation functions
        function validateMerchForm() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const email = document.getElementById('customerEmail').value;
            const item = document.getElementById('merchItem').value;
            const selectedColor = document.querySelector('.color-option.selected');
            const deliveryOption = document.getElementById('deliveryOption').value;
            const deliveryAddress = document.getElementById('deliveryAddress').value;
            
            if (!name || !phone || !email || !item) {
                showError('Please fill in all required fields');
                return false;
            }
            
            if (!selectedColor) {
                showError('Please select a color');
                return false;
            }
            
            if (deliveryOption === 'delivery' && !deliveryAddress) {
                showError('Please enter your delivery address');
                return false;
            }
            
            const validatedPhone = validatePhoneNumber(phone);
            if (!validatedPhone) {
                showError('Please enter a valid Kenyan phone number');
                return false;
            }
            
            document.getElementById('customerPhone').value = validatedPhone;
            return true;
        }

        // Merchandise payment functions
        function processMerchPaystackPayment() {
            const item = document.getElementById('merchItem').value;
            const selectedColor = document.querySelector('.color-option.selected');
            const size = document.getElementById('merchSize').value;
            const quantity = document.getElementById('merchQuantity').value;
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const email = document.getElementById('customerEmail').value;
            const deliveryOption = document.getElementById('deliveryOption').value;
            const deliveryAddress = document.getElementById('deliveryAddress').value;
            const total = parseInt(document.getElementById('merchTotalAmount').textContent);
            
            const orderRef = generateOrderReference('MS-MERCH');
            window.currentMerchOrderRef = orderRef;
            
            const orderData = {
                item: item,
                color: selectedColor ? selectedColor.getAttribute('data-color') : 'Not selected',
                size: size,
                quantity: quantity,
                name: name,
                phone: phone,
                email: email,
                delivery: deliveryOption,
                address: deliveryAddress,
                total: total,
                orderRef: orderRef,
                type: 'merch'
            };
            
            const handler = PaystackPop.setup({
                key: 'pk_live_d6b855fdc0f696978818694e852e3fc5f4a1617b',
                email: email,
                amount: total * 100,
                currency: 'KES',
                ref: orderRef,
                metadata: {
                    custom_fields: [
                        {
                            display_name: "Customer Name",
                            variable_name: "customer_name",
                            value: name
                        },
                        {
                            display_name: "Order Type",
                            variable_name: "order_type",
                            value: 'merchandise'
                        }
                    ]
                },
                callback: function(response) {
                    handleSuccessfulPayment(response, orderData);
                },
                onClose: function() {
                    showManualMerchPaymentOption(orderData);
                }
            });
            
            handler.openIframe();
        }

        async function confirmMerchManualPayment() {
            const item = document.getElementById('merchItem').value;
            const selectedColor = document.querySelector('.color-option.selected');
            const size = document.getElementById('merchSize').value;
            const quantity = document.getElementById('merchQuantity').value;
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const email = document.getElementById('customerEmail').value;
            const deliveryOption = document.getElementById('deliveryOption').value;
            const deliveryAddress = document.getElementById('deliveryAddress').value;
            const total = parseInt(document.getElementById('merchTotalAmount').textContent);
            const orderRef = window.currentMerchOrderRef;
            
            const orderData = {
                item: item,
                color: selectedColor ? selectedColor.getAttribute('data-color') : 'Not selected',
                size: size,
                quantity: quantity,
                name: name,
                phone: phone,
                email: email,
                delivery: deliveryOption,
                address: deliveryAddress,
                total: total,
                orderRef: orderRef,
                type: 'merch'
            };
            
            try {
                const savedOrderRef = await saveMerchOrder(
                    item, selectedColor.getAttribute('data-color'), size, quantity,
                    name, phone, deliveryOption, deliveryAddress, total,
                    'manual_mpesa_till', orderRef
                );
                
                showStatus('merchManualStatus', 'Manual payment recorded! Redirecting to WhatsApp for verification...', 'success');
                
                setTimeout(() => {
                    redirectToWhatsAppMerch(orderData);
                }, 2000);
                
            } catch (error) {
                console.error('Error saving manual merch payment:', error);
                showStatus('merchManualStatus', 'Error recording payment: ' + error.message, 'error');
            }
        }

        function showManualMerchPaymentOption(orderData) {
            const statusDiv = document.getElementById('merchPaystackStatus');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = `
                <div class="payment-instructions">
                    <h4>Manual Payment Option</h4>
                    <p>If M-Pesa payment didn't work, you can make a manual payment:</p>
                    <ol>
                        <li>Go to M-Pesa > Lipa Na M-Pesa > Buy Goods and Services</li>
                        <li>Enter Till Number: <strong>3626261</strong></li>
                        <li>Amount: <strong>KSH ${orderData.total}</strong></li>
                        <li>Account: <strong>${orderData.orderRef}</strong></li>
                    </ol>
                    <button class="btn btn-secondary" onclick="confirmMerchManualPayment()">
                        I've Made the Payment
                    </button>
                </div>
            `;
        }

        // Donation payment functions
        function processDonationPayment() {
            const name = document.getElementById('donorName').value;
            const phone = document.getElementById('donorPhone').value;
            const email = document.getElementById('donorEmail').value;
            const message = document.getElementById('donorMessage').value;
            
            let amount = 0;
            const selectedOption = document.querySelector('.donation-option.active');
            if (selectedOption) {
                amount = parseInt(selectedOption.getAttribute('data-amount'));
            } else if (document.getElementById('customAmount').value) {
                amount = parseInt(document.getElementById('customAmount').value);
            }
            
            if (!name || !phone || !email || amount <= 0) {
                showError('Please fill in all required fields and select a donation amount');
                return;
            }
            
            const validatedPhone = validatePhoneNumber(phone);
            if (!validatedPhone) {
                showError('Please enter a valid Kenyan phone number');
                return;
            }
            
            document.getElementById('donorPhone').value = validatedPhone;
            
            const orderRef = generateOrderReference('MS-DONATION');
            window.currentDonationOrderRef = orderRef;
            
            const orderData = {
                name: name,
                phone: validatedPhone,
                email: email,
                amount: amount,
                message: message,
                orderRef: orderRef,
                type: 'donation'
            };
            
            const handler = PaystackPop.setup({
                key: 'pk_live_d6b855fdc0f696978818694e852e3fc5f4a1617b',
                email: email,
                amount: amount * 100,
                currency: 'KES',
                ref: orderRef,
                metadata: {
                    custom_fields: [
                        {
                            display_name: "Donor Name",
                            variable_name: "donor_name",
                            value: name
                        },
                        {
                            display_name: "Order Type",
                            variable_name: "order_type",
                            value: 'donation'
                        }
                    ]
                },
                callback: function(response) {
                    handleSuccessfulPayment(response, orderData);
                },
                onClose: function() {
                    showManualDonationPaymentOption(orderData);
                }
            });
            
            handler.openIframe();
        }

        async function confirmDonationManual() {
            const name = document.getElementById('donorName').value;
            const phone = document.getElementById('donorPhone').value;
            const email = document.getElementById('donorEmail').value;
            const message = document.getElementById('donorMessage').value;
            
            let amount = 0;
            const selectedOption = document.querySelector('.donation-option.active');
            if (selectedOption) {
                amount = parseInt(selectedOption.getAttribute('data-amount'));
            } else if (document.getElementById('customAmount').value) {
                amount = parseInt(document.getElementById('customAmount').value);
            }
            
            const orderRef = window.currentDonationOrderRef;
            
            const orderData = {
                name: name,
                phone: phone,
                email: email,
                amount: amount,
                message: message,
                orderRef: orderRef,
                type: 'donation'
            };
            
            try {
                await saveDonation(name, phone, email, amount, message);
                
                showStatus('donationStatus', 'Manual donation recorded! Thank you for your support.', 'success');
                
                // Show donation thank you banner
                setTimeout(() => {
                    document.getElementById('donationThankYou').classList.add('active');
                }, 1000);
                
                // Send email (no PDF for donations)
                sendDonationEmail(orderData);
                
            } catch (error) {
                console.error('Error saving manual donation:', error);
                showStatus('donationStatus', 'Error recording donation: ' + error.message, 'error');
            }
        }

        function showManualDonationPaymentOption(orderData) {
            const statusDiv = document.getElementById('donationStatus');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = `
                <div class="payment-instructions">
                    <h4>Manual Payment Option</h4>
                    <p>If M-Pesa payment didn't work, you can make a manual payment:</p>
                    <ol>
                        <li>Go to M-Pesa > Lipa Na M-Pesa > Buy Goods and Services</li>
                        <li>Enter Till Number: <strong>3626261</strong></li>
                        <li>Amount: <strong>KSH ${orderData.amount}</strong></li>
                        <li>Account: <strong>${orderData.orderRef}</strong></li>
                    </ol>
                    <button class="btn btn-secondary" onclick="confirmDonationManual()">
                        I've Made the Donation
                    </button>
                </div>
            `;
        }

        // Artist cards creation
        const artists = [
            { name: "Man Sango", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/sango.jpeg" },
            { name: "Embarambamba", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.17%20PM.jpeg" },
            { name: "Rikanika", image: "https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/rikanika.jpg" },
            { name: "Vick Young", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.22%20PM%20(1).jpeg" },
            { name: "Danlee", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.21%20PM%20(1).jpeg" },
            { name: "Mash Wonder", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.19%20PM.jpeg" },
            { name: "Uncle Styles", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.18%20PM.jpeg" },
            { name: "Ali Butterfly", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/butter.jpg" },
            { name: "Fyna Bee", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.07%20PM.jpeg" },
            { name: "Sparrow", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.14%20PM%20(1).jpeg" },
            { name: "Jimnizzo", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/jimnizzo.jpg" },
            { name: "Culture", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/culture.jpg" },
            { name: "Mojeje", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/mojeje.jpg" },
            { name: "Password Adi Dokta", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.13%20PM.jpeg" },
            { name: "Kamtu Fulani", image: "https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/377_kchdxPbFkq81EjPpkD2rFMyU9E2g_b.jpg" },
            { name: "MC Kudu", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.18%20PM%20(1).jpeg" },
            { name: "Yazeed Classic", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/yazeed.jpg" },
            { name: "Forever Young", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.16%20PM%20(1).jpeg" },
            { name: "Vinto Neskon", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/neskon.jpg" },
            { name: "Cal J Vinka", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/vinka.webp" },
            { name: "Sonkid Kenyanza", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/kenyansa.jpg" },
            { name: "Omoisi Bwokioma", image: "https://kzrrqbkirnemawtgcwpt.supabase.co/storage/v1/object/public/Pictures/okioma.jpg" },
            { name: "Ashur Damsela", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.22%20PM.jpeg" },
            { name: "engeer 254", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.15%20PM.jpeg" },
            { name: "Dion 254", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.20%20PM.jpeg" },
            { name: "Oriah Msanii", image: "https://vsxlzihjcmgkjqcpsrkc.supabase.co/storage/v1/object/public/Mansango%20event%20tickets/WhatsApp%20Image%202025-11-16%20at%208.05.11%20PM.jpeg" }
        ];

        function createArtistCards() {
            const grid = document.getElementById('artistsGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            artists.forEach((artist, index) => {
                const card = document.createElement('div');
                card.className = 'artist-card';
                card.style.animationDelay = `${index * 0.1}s`;
                
                card.innerHTML = `
                    <img src="${artist.image}" alt="${artist.name}" class="artist-card-image" onerror="this.src='https://via.placeholder.com/200x200/333333/FFFFFF?text=${encodeURIComponent(artist.name)}'">
                    <div class="artist-card-name">${artist.name}</div>
                `;
                
                grid.appendChild(card);
                
                setTimeout(() => {
                    card.classList.add('animate');
                }, 100 + (index * 100));
            });
        }

        // Countdown timer
        function updateCountdown() {
            const eventDate = new Date('December 12, 2025 16:00:00 GMT+0300').getTime();
            const now = new Date().getTime();
            const timeLeft = eventDate - now;
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }

        // Fade in elements on scroll
        const fadeElements = document.querySelectorAll('.fade-in');
        const fadeInOnScroll = () => {
            fadeElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('active');
                }
            });
        };
        
        window.addEventListener('scroll', fadeInOnScroll);
        fadeInOnScroll();
    </script>
</body>
</html>
